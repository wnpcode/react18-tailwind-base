import{U as q,i as U,a as _,b as w,g as N,B as R,e as A}from"./index.98d46653.js";import{r as J}from"./styled.58e262dc.js";import{u as O,r as n,o as V,P as E,c as o,F as G,j as a,d as l,i as d,_ as t}from"./vendor.9e149c67.js";import{F as H,S as K,C as T}from"./Select.ea97d86c.js";import{a as Q}from"./Dialog.0839edbc.js";const re=()=>{const{t:r,i18n:W}=O(),u=n.exports.useContext(q),g=V(),b=E(),[f,X]=n.exports.useState(JSON.parse(U("login_data"))||{}),[e,y]=n.exports.useState({active:!1,roleType:""}),[C,S]=n.exports.useState(""),[$,v]=n.exports.useState(!1),k=()=>{v(!1),g("/dashboard/user/user-management",{replace:!0})},[p,D]=n.exports.useState({name:!0,username:!0,roleType:!0,phone:!0,email:!0,password:!0}),[m,I]=n.exports.useState({name:"",username:"",roleType:"",phone:"",email:"",password:""}),[z,Y]=n.exports.useState([...J]);n.exports.useState("");const L=async()=>{try{u.setLoading(!0);let s=await A(`${w.user.all[N()]}/${b.id}`);y(s.data),u.setLoading(!1)}catch{}finally{u.setLoading(!1)}},i=(s,h)=>{let x={...e};t.set(x,h,s),y(x)},M=async()=>{if(!!B())try{u.setLoading(!0);let s=await _(`${w.user.all[N()]}`,{...e,companyId:f.companyId,merchantId:f.merchantId});console.log("asd"),S(e.password),y(s.data),v(!0),toast.success(r("successfully added"))}catch{}finally{u.setLoading(!1)}},B=()=>{let s={name:!0,username:!0,roleType:!0,phone:!0,email:!0,password:!0},h={name:"",username:"",roleType:"",phone:"",email:"",password:""},x=["password"],P=t.reject(t.keys(s),c=>x.includes(c));return t.map(P,c=>{t.get(e,c)||(h[c]=`${r(c)} ${r("required")}`,s[c]=!1)}),I(h),D(s),t.reduce(t.values(s),(c,j)=>c&&j,!0)},F=s=>{R(s.key)&&s.preventDefault()};return n.exports.useEffect(()=>{(async()=>{await L()})()},[]),o(G,{children:[a(l.Card,{className:"mt-12",children:o(l.CardBody,{className:"overflow-x-scroll p-2 px-0 pt-0 pb-2",children:[a("div",{className:"flex flex-row justify-between p-2",children:o("div",{children:[a(l.Typography,{variant:"h5",children:r("Add User")}),a(l.Typography,{variant:"small",children:"Manajemen User"})]})}),o("div",{className:"mt-4 flex w-full flex-row flex-wrap bg-white",children:[o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[a("h3",{className:"required my-2 text-base font-semibold",children:r("name")}),a(l.Input,{color:"blue",type:"text",size:"sm",className:"w-full",placeholder:r("name"),onChange:s=>{i(s.target.value,"name")},value:e==null?void 0:e.name,name:"column1",error:!p.name&&!t.get(e,"name")}),a(l.Typography,{className:"text-xs text-red-500",children:!t.get(e,"name")&&m.name})]}),o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[a("h3",{className:"required my-2 text-base font-semibold",children:r("roleType")}),a(H,{size:"small",error:!p.roleType&&!t.get(e,"roleType"),children:o(K,{placeholder:r("roleType"),onChange:s=>{i(s.target.value,"roleType")},defaultValue:e==null?void 0:e.roleType,value:e==null?void 0:e.roleType,children:[a(T,{value:"",disabled:!0,selected:!0,children:r("roleType")}),z.map(s=>a(T,{value:s.value,children:s.label},s.value))]},e==null?void 0:e.roleType)}),a(l.Typography,{className:"text-xs text-red-500",children:!t.get(e,"roleType")&&m.roleType})]}),o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2 `,children:[a("h3",{className:"required my-2 text-base font-semibold",children:r("username")}),a(l.Input,{placeholder:r("username"),color:"blue",type:"text",size:"sm",onChange:s=>{i(s.target.value,"username")},value:e==null?void 0:e.username,className:"w-full",name:"column1",error:!p.username&&!t.get(e,"username")}),a(l.Typography,{className:"text-xs text-red-500",children:!t.get(e,"username")&&m.username})]}),o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2 `,children:[a("h3",{className:"my-2 text-base font-semibold ",children:r("password")}),a(l.Input,{placeholder:r("password"),color:"blue",type:"text",size:"sm",onChange:s=>{i(s.target.value,"password")},value:e==null?void 0:e.password,className:"w-full",name:"column1",error:!p.password&&!t.get(e,"password")}),a(l.Typography,{color:"gray",className:"text-[12px] font-light",children:"Jika password tidak isi, akan digenerate secara otomatis"}),a(l.Typography,{className:"text-xs text-red-500",children:!t.get(e,"password")&&m.password})]}),o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[a("h3",{className:"required my-2 text-base font-semibold",children:r("phone")}),a(l.Input,{placeholder:r("phone"),color:"blue",type:"tel",size:"sm",onKeyPress:F,onChange:s=>{i(s.target.value,"phone")},value:e==null?void 0:e.phone,name:"column1",error:!p.phone&&!t.get(e,"phone")}),a(l.Typography,{className:"text-xs text-red-500",children:!t.get(e,"phone")&&m.phone})]}),o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[a("h3",{className:"required my-2 text-base font-semibold",children:r("email")}),a(l.Input,{placeholder:r("email"),color:"blue",type:"email",size:"sm",onChange:s=>{i(s.target.value,"email")},value:e==null?void 0:e.email,name:"column1",error:!p.email&&!t.get(e,"email")}),a(l.Typography,{className:"text-xs text-red-500",children:!t.get(e,"email")&&m.email})]}),o("div",{className:`flex ${d?"w-1/2":"w-full"}  flex-col px-2 py-2 `,children:[a("h3",{className:"my-2 text-base font-semibold",children:r("status")}),a(l.Switch,{color:"purple",checked:e==null?void 0:e.active,onChange:s=>i(!e.active,"active"),label:"Status"})]})]}),o("div",{className:"mt-10 flex flex-row-reverse gap-1",children:[a(l.Button,{onClick:()=>{M()},className:"mx-1 rounded-3xl",size:"sm",color:"purple",variant:"gradient",children:r("save")}),a(l.Button,{onClick:()=>g("/dashboard/user/user-management"),className:"mx-1 rounded-3xl",size:"sm",color:"purple",variant:"outlined",children:r("back")})]})]})}),o(Q,{open:$,children:[a(l.DialogHeader,{children:r("user data")}),a(l.DialogBody,{children:a("div",{className:"w-72",children:o("code",{className:"flex flex-col",children:[o("span",{children:["username : ",e==null?void 0:e.username]}),o("span",{children:["password : ",C]})]})})}),a(l.DialogFooter,{children:a(l.Button,{onClick:()=>k(),children:r("close")})})]})]})};export{re as default};
