import{T as re,a as oe,b as ie,c as z,d as c,e as ce,j as de}from"./TableRow.90e205e6.js";import{U as ue,D as pe,h as he,j as me,e as B,b as D,g as M,m as ge}from"./index.98d46653.js";import{r as xe,E as fe}from"./styled.58e262dc.js";import{M as ve}from"./modal-delete.f850104a.js";import{u as U,c as n,d as t,j as e,r as l,P as ye,o as be,_ as E,a9 as Ne,f as I,a6 as we,Y as Ce,ap as Se}from"./vendor.9e149c67.js";import{P as Te}from"./pagination.3acd245c.js";import{F as j,S as A,C as w}from"./Select.ea97d86c.js";import{I as F}from"./InputLabel.ca1c0919.js";const De=({showModalReset:s,description:L="",setModalReset:r,confirmModalReset:m})=>{const{t:i,i18n:k}=U();return n(t.Dialog,{size:"md",handler:()=>r(!1),open:s,children:[e(t.DialogHeader,{children:i("reset confirmation")}),e(t.DialogBody,{className:"flex justify-center",children:n("div",{className:"w-full text-center",children:[n(t.Typography,{variant:"h6",children:[i("reset this"),"\xA0?"]}),e(t.Typography,{variant:"lead",children:L})]})}),n(t.DialogFooter,{className:"gap-1",children:[e(t.Button,{className:"bg-red-500",onClick:()=>m(),children:i("reset")}),e(t.Button,{className:"bg-purple-500",onClick:()=>r(!1),children:i("close")})]})]})},He=()=>{const{t:s,i18n:L}=U(),r=l.exports.useContext(ue),m=[...de];ye();const i=be(),[k,H]=l.exports.useState([]),[d,P]=l.exports.useState(1),[u,R]=l.exports.useState(10),[O,Me]=l.exports.useState(["name","email"]),[_,Ie]=l.exports.useState(["desc","asc"]),[g,q]=l.exports.useState(""),[C,Le]=l.exports.useState(""),[x,G]=l.exports.useState(""),[f,K]=l.exports.useState(""),[p,V]=l.exports.useState(""),[h,Y]=l.exports.useState(""),[J,Q]=l.exports.useState(0),[W,X]=l.exports.useState(0),[Z,ke]=l.exports.useState([...xe]),[ee,Pe]=l.exports.useState([...fe]),[$,ae]=l.exports.useState(!1),[v,y]=l.exports.useState({}),[te,S]=l.exports.useState(!1),[se,T]=l.exports.useState(!1),b=async()=>{let a={};a.page=d-1,a.size=u,a.sort=me(O,_),h&&(a.roleType=h),g&&(a.name=g),C&&(a.username=C),x&&(a.email=x),f&&(a.phone=f),p!==""&&(a.active=p);try{r.setLoading(!0);let o=await B(`${D.user.all[M()]}`,a);r.setLoading(!1),H(o.data.content),P(o.data.number+1),R(o.data.size),X(o.data.totalElements),Q(o.data.totalPages)}catch{}finally{r.setLoading(!1)}},le=async()=>{try{r.setLoading(!0);let a=await ge(`${D.user.all[M()]}/${v.id}`);y({}),S(!1),b()}catch{}finally{r.setLoading(!1)}},ne=async()=>{try{r.setLoading(!0);let a=await B(`${D.user.resetPassword[M()]}/${v.id}`);y({}),T(!1),b()}catch{}finally{r.setLoading(!1)}};return l.exports.useEffect(()=>{const a=setTimeout(()=>b(),1e3);return()=>clearTimeout(a)},[g,C,f,x]),l.exports.useEffect(()=>{b()},[d,u,h,p]),n("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e(t.Card,{className:"px-2",children:n(t.CardBody,{className:"px-0 pt-0 pb-2",children:[n("div",{className:"flex flex-row justify-between p-2",children:[n("div",{children:[e(t.Typography,{variant:"h5",children:E.startCase(s("user management"))}),e("span",{children:E.startCase(s("user management"))})]}),e("div",{children:e(t.Button,{color:"purple",onClick:()=>{i("/dashboard/user/user-management/add")},children:s("add")})})]}),e(t.Button,{onClick:()=>ae(!$),size:"sm",color:"gray",variant:"gradient",className:"mx-1 mb-2",children:s("filter")}),e(t.Collapse,{open:$,children:n("div",{className:"my-1 flex flex-wrap py-1",children:[e("div",{className:" w-1/4  px-1",children:e(t.Input,{label:s("name"),value:g,onChange:a=>q(a.target.value)})}),e("div",{className:" w-1/4  px-1",children:e(t.Input,{label:s("email"),value:x,onChange:a=>G(a.target.value)})}),e("div",{className:" w-1/4  px-1",children:e(t.Input,{label:s("phone"),value:f,onKeyPress:pe,onChange:a=>K(a.target.value)})}),e("div",{className:" w-1/4  px-1",children:n(j,{size:"small",className:"w-full",children:[e(F,{id:"roleType",children:s("roleType")}),n(A,{labelId:"roleType",label:s("roleType"),placeholder:s("roleType"),onChange:a=>{Y(a.target.value)},value:h,children:[e(w,{value:"",children:s("-")},""),Z.map(a=>e(w,{value:a.value,children:a.label},a.value))]},h)]})}),e("div",{className:" w-1/4  px-1",children:n(j,{size:"small",className:"w-full",children:[e(F,{id:"status",children:s("status")}),n(A,{labelId:"status",label:s("status"),placeholder:s("status"),onChange:a=>{V(a.target.value)},value:p,children:[e(w,{value:"",children:s("-")},""),ee.map(a=>e(w,{value:a.value,children:a.label},a.value))]},p)]})})]})}),e(re,{className:"max-h-[450px]",children:n(oe,{stickyHeader:!0,size:"small",children:[e(ie,{children:n(z,{children:[e(c,{align:"center",children:"No"}),m.map((a,o)=>e(c,{align:a.align,children:s(a.label)},`head${o}`)),e(c,{align:"right",children:s("action")})]})}),e(ce,{children:k.map((a,o)=>n(z,{hover:!0,role:"checkbox",tabIndex:-1,children:[e(c,{align:"center",width:80,children:(d-1)*u+o+1}),m.map((N,Re)=>e(c,{align:N.align,children:he(a,N.key,N.type,N.option)})),e(c,{align:"right",width:80,children:n(t.Menu,{placement:"left",children:[e(t.MenuHandler,{children:e(t.IconButton,{variant:"text",color:"blue-gray",children:e(Ne,{className:"h-10 w-10 text-blue-gray-500"})})}),n(t.MenuList,{className:"min-w-[100px]",children:[n(t.MenuItem,{className:"text-orange-500",onClick:()=>{i(`/dashboard/user/user-management/edit/${a==null?void 0:a.id}`)},children:[e(I,{icon:we}),"\xA0",s("edit")]}),n(t.MenuItem,{className:"text-red-500",onClick:()=>{y(a),S(!0)},children:[e(I,{icon:Ce}),"\xA0",e("span",{children:s("delete")})]}),n(t.MenuItem,{className:"text-red-500",onClick:()=>{y(a),T(!0)},children:[e(I,{icon:Se}),"\xA0",e("span",{children:s("resetPassword")})]})]})]})})]},a.id))})]})}),e(Te,{page:d,size:u,pages:J,totalElements:W,setpage:P,setsize:R},`${d}-${u}`)]})}),e(ve,{showModalDelete:te,description:v.name,setModalDelete:S,confirmModalDelete:le}),e(De,{showModalReset:se,description:v.name,setModalReset:T,confirmModalReset:ne})]})};export{He as default};
