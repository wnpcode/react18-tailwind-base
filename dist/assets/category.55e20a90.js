import{T as Se,a as we,b as Ne,c as se,d as k,e as Ie,f as De}from"./TableRow.90e205e6.js";import{N as Te,U as Me,f as H,h as $e,i as Le,j as ne,e as re,b as j,g as _,k as Pe,a as Re,m as ke}from"./index.98d46653.js";import{a4 as b,r as i,j as o,a5 as Ue,u as pe,F as Be,c as h,d as g,f as E,a6 as ue,a7 as Ae,a8 as je,_ as f,P as _e,o as Ee,a9 as ze,Y as Fe}from"./vendor.9e149c67.js";import{_ as z,d as Oe,i as We,g as J,a as V,s as F,c as me,u as Y,b as G,e as K,f as Qe,h as He}from"./styled.58e262dc.js";import{u as Je,a as Ve,F as ie,S as le,C as ce}from"./Select.ea97d86c.js";import{D as Ye,a as Ge}from"./Dialog.0839edbc.js";import{M as Ke}from"./modal-delete.f850104a.js";import{P as Xe}from"./pagination.3acd245c.js";const Ze=["sx"],qe=e=>{var t,a;const s={systemProps:{},otherProps:{}},m=(t=e==null||(a=e.theme)==null?void 0:a.unstable_sxConfig)!=null?t:Oe;return Object.keys(e).forEach(r=>{m[r]?s.systemProps[r]=e[r]:s.otherProps[r]=e[r]}),s};function et(e){const{sx:t}=e,a=z(e,Ze),{systemProps:s,otherProps:m}=qe(a);let r;return Array.isArray(t)?r=[s,...t]:typeof t=="function"?r=(...d)=>{const c=t(...d);return We(c)?b({},s,c):s}:r=b({},s,t),b({},m,{sx:r})}function tt(e){return J("MuiTypography",e)}V("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const at=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],ot=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:m,variant:r,classes:d}=e,c={root:["root",r,e.align!=="inherit"&&`align${me(t)}`,a&&"gutterBottom",s&&"noWrap",m&&"paragraph"]};return K(c,tt,d)},st=F("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${me(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>b({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),de={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},nt={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},rt=e=>nt[e]||e,it=i.exports.forwardRef(function(t,a){const s=Y({props:t,name:"MuiTypography"}),m=rt(s.color),r=et(b({},s,{color:m})),{align:d="inherit",className:c,component:p,gutterBottom:C=!1,noWrap:S=!1,paragraph:I=!1,variant:M="body1",variantMapping:x=de}=r,U=z(r,at),u=b({},r,{align:d,color:m,className:c,component:p,gutterBottom:C,noWrap:S,paragraph:I,variant:M,variantMapping:x}),N=p||(I?"p":x[M]||de[M])||"span",D=ot(u);return o(st,b({as:N,ref:a,ownerState:u,className:G(D.root,c)},U))}),lt=it;function ct(e){return J("MuiDialogActions",e)}V("MuiDialogActions",["root","spacing"]);const dt=["className","disableSpacing"],pt=e=>{const{classes:t,disableSpacing:a}=e;return K({root:["root",!a&&"spacing"]},ct,t)},ut=F("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})(({ownerState:e})=>b({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),mt=i.exports.forwardRef(function(t,a){const s=Y({props:t,name:"MuiDialogActions"}),{className:m,disableSpacing:r=!1}=s,d=z(s,dt),c=b({},s,{disableSpacing:r}),p=pt(c);return o(ut,b({className:G(p.root,m),ownerState:c,ref:a},d))}),gt=mt;function ht(e){return J("MuiDialogContent",e)}V("MuiDialogContent",["root","dividers"]);function ft(e){return J("MuiDialogTitle",e)}const yt=V("MuiDialogTitle",["root"]),xt=yt,vt=["className","dividers"],bt=e=>{const{classes:t,dividers:a}=e;return K({root:["root",a&&"dividers"]},ht,t)},Ct=F("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>b({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${xt.root} + &`]:{paddingTop:0}})),St=i.exports.forwardRef(function(t,a){const s=Y({props:t,name:"MuiDialogContent"}),{className:m,dividers:r=!1}=s,d=z(s,vt),c=b({},s,{dividers:r}),p=bt(c);return o(Ct,b({className:G(p.root,m),ownerState:c,ref:a},d))}),wt=St,Nt=["className","id"],It=e=>{const{classes:t}=e;return K({root:["root"]},ft,t)},Dt=F(lt,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Tt=i.exports.forwardRef(function(t,a){const s=Y({props:t,name:"MuiDialogTitle"}),{className:m,id:r}=s,d=z(s,Nt),c=s,p=It(c),{titleId:C=r}=i.exports.useContext(Ye);return o(Dt,b({component:"h2",className:G(p.root,m),ownerState:c,ref:a,variant:"h6",id:r!=null?r:C},d))}),Mt=Tt;function $t(e,t,a,s,m){const[r,d]=i.exports.useState(()=>m&&a?a(e).matches:s?s(e).matches:t);return Je(()=>{let c=!0;if(!a)return;const p=a(e),C=()=>{c&&d(p.matches)};return C(),p.addListener(C),()=>{c=!1,p.removeListener(C)}},[e,a]),r}const ge=Ue["useSyncExternalStore"];function Lt(e,t,a,s,m){const r=i.exports.useCallback(()=>t,[t]),d=i.exports.useMemo(()=>{if(m&&a)return()=>a(e).matches;if(s!==null){const{matches:S}=s(e);return()=>S}return r},[r,e,s,m,a]),[c,p]=i.exports.useMemo(()=>{if(a===null)return[r,()=>()=>{}];const S=a(e);return[()=>S.matches,I=>(S.addListener(I),()=>{S.removeListener(I)})]},[r,a,e]);return ge(p,c,d)}function Pt(e,t={}){const a=Qe(),s=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:m=!1,matchMedia:r=s?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:c=!1}=He({name:"MuiUseMediaQuery",props:t,theme:a});let p=typeof e=="function"?e(a):e;return p=p.replace(/^@media( ?)/m,""),(ge!==void 0?Lt:$t)(p,m,r,d,c)}const Rt=F("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function kt({showModalDetail:e,detailData:t={},setModalDetail:a,confirmModalDetail:s,companyList:m,merchantList:r}){const[d,c]=i.exports.useState(),[p,C]=i.exports.useState(t.imageUrl),S=l=>{C(URL.createObjectURL(l.target.files[0])),c(l.target.files[0])},I=Ve(),M=Pt(I.breakpoints.down("md")),{t:x,i18n:U}=pe(),[u,N]=i.exports.useState({merchantId:"",name:"",description:"",...t}),[D,T]=i.exports.useState({name:!0,description:!0,companyId:!0,merchantId:!0}),[B,A]=i.exports.useState({name:"",description:"",companyId:"",merchantId:""}),X=()=>{T({name:!0,description:!0,companyId:!0,merchantId:!0}),A({name:"",description:"",companyId:"",merchantId:""})},$=(l,L)=>{let P={...u};f.set(P,L,l),N(P)},ae=()=>{!Z()||s(u,d)},Z=()=>{let l={name:!0,description:!0,companyId:!0,merchantId:!0},L={name:"",description:"",companyId:"",merchantId:""},P=["description"],O=f.reject(f.keys(l),w=>P.includes(w));return f.map(O,w=>{f.get(u,w)||(L[w]=`${x(w)} ${x("required")}`,l[w]=!1)}),A(L),T(l),f.reduce(f.values(l),(w,q)=>w&&q,!0)};return o(Be,{children:h(Ge,{open:e,onClose:()=>{a(!1),X()},className:"bg-transparent",fullScreen:M,children:[o(Mt,{children:x(t!=null&&t.id?"editCategory":"addCategory")}),h(wt,{className:"flex w-96 flex-col gap-4",children:[h("div",{children:[o(g.Typography,{className:"mb-0",variant:"h6",children:x("icon")}),h(g.Card,{className:"group relative flex aspect-square w-20 cursor-pointer items-center justify-center overflow-hidden bg-gray-200",onClick:()=>{document.getElementById("file-upload").click()},children:[p,p?o("img",{className:"",src:p,alt:d==null?void 0:d.filename}):o("img",{className:"w-full",src:Te,alt:"noImage"}),h("div",{class:"absolute top-0 left-0 flex h-full w-full flex-col items-center justify-center bg-black bg-opacity-0 opacity-0 duration-500 group-hover:h-full group-hover:bg-opacity-80 group-hover:opacity-100",children:[p?o(E,{icon:ue,className:"fa-2xl text-orange-700"}):o(E,{icon:Ae,className:"fa-2xl text-green-700"}),p&&o(E,{onClick:l=>{l.stopPropagation(),C(null),c("")},icon:je,className:"fa-md absolute top-2 right-2 text-red-500"})]}),o(Rt,{id:"file-upload",type:"file",accept:".jpg,.png,.jpeg",onChange:l=>S(l)})]})]}),h("div",{children:[o(g.Typography,{className:"mb-0",variant:"h6",children:x("companyName")}),o(ie,{className:"w-full",size:"small",error:!D.companyId&&!f.get(u,"companyId"),children:o(le,{onChange:l=>{$(l.target.value,"companyId")},value:u==null?void 0:u.companyId,children:m.map(l=>o(ce,{value:l.value,children:l.label},l.value))})})]}),h("div",{children:[o(g.Typography,{className:"mb-0",variant:"h6",children:x("merchantName")}),o(ie,{className:"w-full",size:"small",error:!D.merchantId&&!f.get(u,"merchantId"),children:o(le,{onChange:l=>{$(l.target.value,"merchantId")},value:u==null?void 0:u.merchantId,children:r.map(l=>o(ce,{value:l.value,children:l.label},l.value))})})]}),h("div",{children:[o(g.Typography,{className:"mb-0",variant:"h6",children:x("name")}),o(g.Input,{color:"blue",type:"text",size:"lg",className:"w-full",onChange:l=>{$(l.target.value,"name")},value:u==null?void 0:u.name,name:"column1",error:!D.name&&!f.get(u,"name")}),o(g.Typography,{className:"text-xs text-red-500",children:!f.get(u,"name")&&B.name})]}),h("div",{children:[o(g.Typography,{className:"mb-0",variant:"h6",children:x("description")}),o(g.Input,{color:"blue",type:"text",size:"lg",className:"w-full",onChange:l=>{$(l.target.value,"description")},value:u==null?void 0:u.description,name:"column1",error:!D.description&&!f.get(u,"description")}),o(g.Typography,{className:"text-xs text-red-500",children:!f.get(u,"description")&&B.description})]})]})," ",h(gt,{children:[o(g.Button,{color:"purple",variant:"outlined",className:"mx-1",onClick:()=>{a(!1),X()},children:x("close")}),o(g.Button,{color:"purple",variant:"gradient",className:"mx-1",onClick:ae,children:x("save")})]})]})})}const Ot=()=>{const{t:e,i18n:t}=pe(),a=i.exports.useContext(Me),s=[...De];_e(),Ee();const[m,r]=i.exports.useState([]),[d,c]=i.exports.useState(""),[p,C]=i.exports.useState(""),[S,I]=i.exports.useState([]),[M,x]=i.exports.useState(""),[U,u]=i.exports.useState([]),[N,D]=i.exports.useState(1),[T,B]=i.exports.useState(10),[A,X]=i.exports.useState(["name"]),[$,ae]=i.exports.useState(["desc"]),[Z,l]=i.exports.useState(0),[L,P]=i.exports.useState(0),[O,w]=i.exports.useState({}),[q,ee]=i.exports.useState(!1),[oe,W]=i.exports.useState({}),[he,Q]=i.exports.useState(!1),fe=async()=>{try{let n={data:{content:[{value:JSON.parse(Le("login_data")).companyId,label:"Company 1"}]}};I(n.data.content),s[f.findIndex(s,{key:"companyId"})].option=n.data.content}catch{}},ye=async()=>{let n={};n.page=N-1,n.size=T,n.sort=ne(A,$),d&&(n.name=d);try{a.setLoading(!0);let y=await re(`${j.user.all[_()]}`,n);a.setLoading(!1),u(f.map(y.data.content,v=>({label:v.name,value:v.merchantId,other:v}))),s[f.findIndex(s,{key:"merchantId"})].option=f.map(y.data.content,v=>({label:v.name,value:v.merchantId,other:v}))}catch{a.setLoading(!1)}},te=async()=>{let n={};n.page=N-1,n.size=T,n.sort=ne(A,$),n.name=d,n.companyId=p,n.merchantId=M;try{a.setLoading(!0);let y=await re(`${j.category.all[_()]}`,n);a.setLoading(!1),r(y.data.content),D(y.data.number+1),B(y.data.size),P(y.data.totalElements),l(y.data.totalPages)}catch{a.setLoading(!1)}},xe=async(n,y)=>{try{let R=new FormData;R.append("file",y);const be=JSON.stringify(n),Ce=new Blob([be],{type:"application/json"});if(R.append("data",Ce),a.setLoading(!0),n.id)v=await Pe(`${j.category.all[_()]}/${n.id}`,R);else var v=await Re(`${j.category.all[_()]}`,R);W({}),Q(!1),te(),a.setLoading(!1)}catch{a.setLoading(!0)}},ve=async()=>{try{a.setLoading(!0);let n=await ke(`${j.category.all[_()]}/${O.id}`);w({}),ee(!1),te(),a.setLoading(!1)}catch{a.setLoading(!0)}};return i.exports.useEffect(()=>{fe(),ye(),(async()=>{})()},[]),i.exports.useEffect(()=>{te()},[N,T]),h("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[o(g.Card,{className:"px-2",children:h(g.CardBody,{className:"px-0 pt-0 pb-2",children:[h("div",{className:"flex flex-row justify-between p-2",children:[h("div",{children:[o(g.Typography,{variant:"h5",children:f.startCase(e("categories"))}),o("span",{children:f.startCase(e("categories"))})]}),o("div",{children:o(g.Button,{color:"purple",onClick:()=>{let n={};H("roleType")!="SUPER_ADMIN"?n.companyId=H("companyId"):n.companyId="",W({...n}),Q(!0)},children:e("add")})})]}),o(Se,{className:"max-h-[450px]",children:h(we,{stickyHeader:!0,size:"small",children:[o(Ne,{children:h(se,{children:[o(k,{size:"small",align:"left",children:"No"}),s.map((n,y)=>o(k,{align:n.align,children:e(n.label)},`head${y}`)),o(k,{align:"right",children:e("action")})]})}),o(Ie,{children:m.map((n,y)=>h(se,{hover:!0,role:"checkbox",tabIndex:-1,children:[o(k,{align:"center",width:80,children:(N-1)*T+y+1}),s.map((v,R)=>o(k,{align:v.align,children:$e(n,v.key,v.type,v.option)},`row-col-${n.id}`)),o(k,{align:"right",width:80,children:h(g.Menu,{placement:"left",children:[o(g.MenuHandler,{children:o(g.IconButton,{variant:"text",color:"blue-gray",children:o(ze,{className:"h-10 w-10 text-blue-gray-500"})})}),h(g.MenuList,{className:"min-w-[100px]",children:[h(g.MenuItem,{className:"text-orange-500",onClick:()=>{({...n},H("roleType")!="SUPER_ADMIN"&&H("companyId")),W(n),Q(!0)},children:[o(E,{icon:ue}),"\xA0",e("edit")]}),h(g.MenuItem,{className:"text-red-500",onClick:()=>{w(n),ee(!0)},children:[o(E,{icon:Fe}),"\xA0",o("span",{children:e("delete")})]})]})]})})]},`row-${n.id}`))})]})}),o(Xe,{page:N,size:T,pages:Z,totalElements:L,setpage:D,setsize:B},`${N}-${T}`)]})}),o(Ke,{showModalDelete:q,description:O.name,setModalDelete:ee,confirmModalDelete:ve}),o(kt,{showModalDetail:he,detailData:oe,setDetailData:W,setModalDetail:Q,confirmModalDetail:xe,merchantList:U,companyList:S},`${JSON.stringify(oe)}-${JSON.stringify(U).length}`)]})};export{Ot as default};
