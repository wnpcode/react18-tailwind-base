import{U as q,k as D,b as v,g as N,e as F}from"./index.98d46653.js";import{r as I}from"./styled.58e262dc.js";import{u as U,r as c,o as M,P,j as l,F as B,d as t,c as n,i as m,_ as r,a as R}from"./vendor.9e149c67.js";import{F as _,S as E,C as w}from"./Select.ea97d86c.js";const J=()=>{const{t:s,i18n:V}=U(),u=c.exports.useContext(q),f=M(),g=P(),[e,y]=c.exports.useState(null),[p,T]=c.exports.useState({name:!0,username:!0,roleType:!0,phone:!0,email:!0}),[d,b]=c.exports.useState({name:"",username:"",roleType:"",phone:"",email:""}),[C,A]=c.exports.useState([...I]);c.exports.useState("");const $=async()=>{try{u.setLoading(!0);let a=await F(`${v.user.all[N()]}/${g.id}`);y(a.data)}catch{}finally{u.setLoading(!1)}},i=(a,h)=>{let x={...e};r.set(x,h,a),y(x)},S=async()=>{if(!!k())try{u.setLoading(!0);let a=await D(`${v.user.all[N()]}/${g.id}`,e);y(a.data),R.success(s("successfully changed")),u.setLoading(!1),f("/dashboard/user/user-management",{replace:!0})}catch{}finally{u.setLoading(!1)}},k=()=>{let a={name:!0,username:!0,roleType:!0,phone:!0,email:!0},h={name:"",username:"",roleType:"",phone:"",email:""},x=["phone","email"],L=r.reject(r.keys(a),o=>x.includes(o));return r.map(L,o=>{r.get(e,o)||(h[o]=`${s(o)} ${s("required")}`,a[o]=!1)}),b(h),T(a),r.reduce(r.values(a),(o,j)=>o&&j,!0)},z=a=>{checkRegex(a.key)&&a.preventDefault()};return c.exports.useEffect(()=>{(async()=>{await $()})()},[]),l(B,{children:l(t.Card,{className:"mt-12",children:n(t.CardBody,{className:"overflow-x-scroll p-2 px-0 pt-0 pb-2",children:[l("div",{className:"flex flex-row justify-between p-2",children:n("div",{children:[l(t.Typography,{variant:"h5",children:s("Edit User")}),l(t.Typography,{variant:"small",children:"Manajemen User"})]})}),n("div",{className:"mt-4 flex w-full flex-row flex-wrap bg-white",children:[n("div",{className:`flex ${m?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[l("h3",{className:"required my-2 text-base font-semibold",children:s("name")}),l(t.Input,{color:"blue",type:"text",size:"sm",className:"w-full",placeholder:s("name"),onChange:a=>{i(a.target.value,"name")},value:e==null?void 0:e.name,name:"column1",error:!p.name&&!r.get(e,"name")}),l(t.Typography,{className:"text-xs text-red-500",children:!r.get(e,"name")&&d.name})]}),n("div",{className:`flex ${m?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[l("h3",{className:"required my-2 text-base font-semibold",children:s("roleType")}),l(_,{size:"small",error:!p.roleType&&!r.get(e,"roleType"),children:n(E,{placeholder:s("roleType"),onChange:a=>{i(a.target.value,"roleType")},defaultValue:e==null?void 0:e.roleType,value:e==null?void 0:e.roleType,children:[l(w,{value:"",disabled:!0,selected:!0,children:s("roleType")}),C.map(a=>l(w,{value:a.value,children:a.label},a.value))]},e==null?void 0:e.roleType)}),l(t.Typography,{className:"text-xs text-red-500",children:!r.get(e,"roleType")&&d.roleType})]}),n("div",{className:`flex ${m?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[l("h3",{className:"required my-2 text-base font-semibold",children:s("username")}),l(t.Input,{placeholder:s("username"),color:"blue",type:"text",size:"sm",onChange:a=>{i(a.target.value,"username")},value:e==null?void 0:e.username,className:"w-full",name:"column1",error:!p.username&&!r.get(e,"username")}),l(t.Typography,{className:"text-xs text-red-500",children:!r.get(e,"username")&&d.username})]}),n("div",{className:`flex ${m?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[l("h3",{className:"required my-2 text-base font-semibold",children:s("phone")}),l(t.Input,{placeholder:s("phone"),color:"blue",type:"text",size:"sm",onKeyPress:z,onChange:a=>{i(a.target.value,"phone")},value:e==null?void 0:e.phone,name:"column1",error:!p.phone&&!r.get(e,"phone")}),l(t.Typography,{className:"text-xs text-red-500",children:!r.get(e,"phone")&&d.phone})]}),n("div",{className:`flex ${m?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[l("h3",{className:"required my-2 text-base font-semibold",children:s("email")}),l(t.Input,{placeholder:s("email"),color:"blue",type:"email",size:"sm",onChange:a=>{i(a.target.value,"email")},value:e==null?void 0:e.email,name:"column1",error:!p.email&&!r.get(e,"email")}),l(t.Typography,{className:"text-xs text-red-500",children:!r.get(e,"email")&&d.email})]}),n("div",{className:`flex ${m?"w-1/2":"w-full"}  flex-col px-2 py-2`,children:[l("h3",{className:"my-2 text-base font-semibold",children:s("status")}),l(t.Switch,{color:"purple",checked:e==null?void 0:e.active,onChange:a=>i(!e.active,"active"),label:"Status"})]})]}),n("div",{className:"mt-10 flex flex-row-reverse gap-1",children:[l(t.Button,{onClick:()=>{S()},className:"mx-1 rounded-3xl",size:"sm",color:"purple",variant:"gradient",children:s("save")}),l(t.Button,{onClick:()=>f("/dashboard/user/user-management"),className:"mx-1 rounded-3xl",size:"sm",color:"purple",variant:"outlined",children:s("back")})]})]})})})};export{J as default};
